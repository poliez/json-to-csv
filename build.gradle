/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

plugins {
    id 'scala'
    id 'application'
    id 'com.palantir.graal' version '0.7.1'
}

repositories {
    mavenCentral()
}

application {
    mainClassName 'dev.poliez.tools.JsonToCsv'
}

graal {
    mainClass 'dev.poliez.tools.JsonToCsv'
    outputName 'json-to-csv'
    javaVersion '11'
    graalVersion '20.2.0'
    option '--no-fallback'
    option '-H:+ReportExceptionStackTraces'
}

sourceSets.main.scala.srcDir "src/main/java"
sourceSets.main.java.srcDirs = []

compileScala {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
    options.compilerArgs += ["-Aproject=${project.name}"]
}

dependencies {
    implementation 'org.scala-lang:scala-library:2.13.3'
    implementation 'com.lihaoyi:upickle_2.13:0.9.5'
    implementation 'info.picocli:picocli:4.5.1'
    implementation 'org.scalameta:svm-subs_2.13:20.2.0'

    testRuntimeOnly 'org.scala-lang.modules:scala-xml_2.13:1.3.0'

    annotationProcessor 'info.picocli:picocli-codegen:4.5.1'
}
